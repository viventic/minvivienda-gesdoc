<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd        http://camel.apache.org/schema/spring       http://camel.apache.org/schema/spring/camel-spring.xsd">
    <camelContext id="camelContext-c480fe71-1bf8-4993-ada9-9da9297f0d7a" xmlns="http://camel.apache.org/schema/spring">
        <restConfiguration apiContextPath="/api-doc"
            apiContextRouteId="doc-api" component="servlet"
            contextPath="/gesdoc" enableCORS="true" scheme="http">
            <apiProperty key="api.title" value="User Service"/>
            <apiProperty key="api.version" value="1.0"/>
            <apiProperty key="api.specification.contentType.json" value="application/vnd.oai.openapi+json;version=2.0"/>
            <apiProperty key="api.specification.contentType.yaml" value="application/vnd.oai.openapi;version=2.0"/>
            <apiProperty key="cors" value="true"/>
        </restConfiguration>
        <!-- Override the default Camel Swagger doc with custom OpenAPI doc -->
        <!-- 
        <rest path="/" enableCORS="true">
            <get id="openapi.json" produces="application/json" uri="openapi.json">
                <description>Gets the openapi document for this service</description>
                <route>
                    <setHeader headerName="Exchange.CONTENT_TYPE">
                        <constant>application/vnd.oai.openapi+json</constant>
                    </setHeader>
                    <setBody>
                        <simple>resource:classpath:openapi.json</simple>
                    </setBody>
                </route>
            </get>
        </rest>
        -->
        <!-- User service -->
        <rest bindingMode="json" enableCORS="true"
            id="rest-6711d8f8-725d-4958-b691-3af9624aefe5" path="/users">
            <description id="description-7b3ea052-11a4-4117-b732-92ed8d8dcc88">Users Service</description>
            <post consumes="application/json" id="greet"
                outType="java.lang.String" produces="application/text"
                type="co.com.minvivienda.gesdoc.User" uri="greet">
                <description>Greet this Service with User credentials</description>
                <responseMessage code="200" message="User added"/>
                <to uri="bean:userService?method=greetUser"/>
            </post>
            <get id="list" outType="co.com.minvivienda.gesdoc.User[]"
                produces="application/json" uri="list">
                <description>List users that used this service</description>
                <responseMessage code="200" message="All users successfully returned"/>
                <to uri="bean:userService?method=findUsers"/>
            </get>
        </rest>
    </camelContext>
</beans>
